<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-rollkit-stack">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">The Rollkit Stack | Rollkit</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://rollkit.dev/pr-preview/pr-79/img/RollKit.png"><meta data-rh="true" name="twitter:image" content="https://rollkit.dev/pr-preview/pr-79/img/RollKit.png"><meta data-rh="true" property="og:url" content="https://rollkit.dev/pr-preview/pr-79/docs/rollkit-stack/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="The Rollkit Stack | Rollkit"><meta data-rh="true" name="description" content="Intro to Rollkit&#x27;s stack, a modular framework for rollups."><meta data-rh="true" property="og:description" content="Intro to Rollkit&#x27;s stack, a modular framework for rollups."><link data-rh="true" rel="icon" href="/pr-preview/pr-79/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://rollkit.dev/pr-preview/pr-79/docs/rollkit-stack/"><link data-rh="true" rel="alternate" href="https://rollkit.dev/pr-preview/pr-79/docs/rollkit-stack/" hreflang="en"><link data-rh="true" rel="alternate" href="https://rollkit.dev/pr-preview/pr-79/docs/rollkit-stack/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/pr-preview/pr-79/blog/rss.xml" title="Rollkit RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/pr-preview/pr-79/blog/atom.xml" title="Rollkit Atom Feed">



<script src="https://plausible.celestia.org/js/plausible.js" defer="defer" data-domain="rollkit.dev"></script><link rel="stylesheet" href="/pr-preview/pr-79/assets/css/styles.4ef5c838.css">
<link rel="preload" href="/pr-preview/pr-79/assets/js/runtime~main.e0b7e4af.js" as="script">
<link rel="preload" href="/pr-preview/pr-79/assets/js/main.9b0ee162.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?e("light"):e("dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/pr-preview/pr-79/"><div class="navbar__logo"><img src="/pr-preview/pr-79/img/toolbox.svg" alt="Rollkit logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/pr-preview/pr-79/img/toolbox.svg" alt="Rollkit logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Rollkit v0</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/pr-preview/pr-79/docs/intro/">Docs</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Community</a><ul class="dropdown__menu"><li><a href="https://discord.com/channels/638338779505229824/1065974175237414972" target="_blank" rel="noopener noreferrer" class="dropdown__link">Discord<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a href="https://github.com/rollkit" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/pr-preview/pr-79/docs/intro/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/pr-preview/pr-79/docs/rollkit-stack/">Rollkit Stack</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/pr-preview/pr-79/docs/category/tutorials/">Tutorials</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorials&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/pr-preview/pr-79/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Rollkit Stack</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>The Rollkit Stack</h1><p>This section will cover the dependencies and customizeable components of Rollkit.</p><p>Rollup sequencer nodes collect transactions from users, aggregate them into blocks, and post the blocks onto Celestia (or other DA layer) to be ordered and finalized. Full nodes execute and verify rollup blocks, and propagate fraud-proofs when needed. Light clients receive headers, verify fraud proofs, and can authenticate trust-minimized queries about the state.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Tip</div><div class="admonitionContent_S0QG"><p>If you&#x27;re familiar with Rollkit&#x27;s stack, you may want to skip to the <a href="/pr-preview/pr-79/docs/category/tutorials/">tutorials section</a></p></div></div><p>For an understanding of the Rollkit stack, let&#x27;s first look at the key components of a rollup. A typical rollup has:</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="rollup-application-dependencies">Rollup Application Dependencies<a class="hash-link" href="#rollup-application-dependencies" title="Direct link to heading">‚Äã</a></h2><p>Would you like to change your Cosmos-SDK application to a Rollkit rollup?
No problem! You need to replace the Cosmos-SDK Go dependency with
Rollkit-enabled version, which can be found
here: <a href="https://github.com/rollkit/cosmos-sdk" target="_blank" rel="noopener noreferrer">https://github.com/rollkit/cosmos-sdk</a>.</p><p>To note, the <a href="https://github.com/rollkit/cosmos-sdk" target="_blank" rel="noopener noreferrer"><code>rollkit/cosmos-sdk</code></a> repository follows the release branches of
upstream Cosmos-SDK, but with the bonus of using Rollkit instead of Tendermint
as the ABCI client.</p><p>And don&#x27;t forget to replace another dependency, <code>tendermint</code>, with
<a href="https://github.com/rollkit/tendermint" target="_blank" rel="noopener noreferrer"><code>rollkit/tendermint</code></a>, which has an enhanced ABCI interface that includes
the methods needed for state fraud proofs.</p><blockquote><p><strong>Requires Golang version 1.19+</strong></p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="mempool">Mempool<a class="hash-link" href="#mempool" title="Direct link to heading">‚Äã</a></h2><p>The mempool keeps the set of pending transactions, and is used by block
producers to produce blocks and full nodes to verify blocks. Currently, transactions are handled by
nodes in the First-Come, First-Served (FCFS) manner. Ordering of transactions
can be implemented on the application level (for example by adding
nonce/sequence number). This behavior is similar to the Tendermint mempool.</p><p>We plan to make transaction ordering in blocks configurable in the future.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="state-fraud-proofs">State Fraud Proofs<a class="hash-link" href="#state-fraud-proofs" title="Direct link to heading">‚Äã</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="p2p-layer">P2P-Layer<a class="hash-link" href="#p2p-layer" title="Direct link to heading">‚Äã</a></h2><p>Rollkit&#x27;s P2P layer enables direct communication between rollup nodes.
It&#x27;s used to gossip transactions, headers of newly created blocks and state fraud proofs.
The P2P layer is implemented using <a href="https://github.com/libp2p" target="_blank" rel="noopener noreferrer">libp2p</a>.</p><p>Rollkit uses <a href="https://curriculum.pl-launchpad.io/curriculum/libp2p/dht/" target="_blank" rel="noopener noreferrer">DHT-based active peer discovery</a>.
Starting a node connects to preconfigured bootstrap peers, and advertises it&#x27;s namespace ID in DHT.
This solution is flexible, because multiple rollup networks may reuse the same DHT/bootstrap nodes,
but specific rollup network might decide to use dedicated nodes as well.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="da-access">DA-Access<a class="hash-link" href="#da-access" title="Direct link to heading">‚Äã</a></h2><p>Data Availability (DA) can be accessed using generic <a href="https://github.com/rollkit/rollkit/blob/main/da/da.go" target="_blank" rel="noopener noreferrer">interfaces</a>. This design allows for seamless integration with any DA.</p><p>The <code>DataAvailabilityLayerClient</code> interface includes essential life-cycle methods (<code>Init</code>, <code>Start</code>, <code>Stop</code>) as well as data-availability methods (<code>SubmitBlock</code>, <code>CheckBlockAvailability</code>).</p><p>The <code>BlockRetriever</code> interface serves to enable syncing of full nodes from the Data Availability layer.
It&#x27;s important to keep in mind that there is no direct correlation between the DA block height and the rollup height. Each DA block may contain an arbitrary number of rollup blocks.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="rollkit-node-types">Rollkit Node Types<a class="hash-link" href="#rollkit-node-types" title="Direct link to heading">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sequencer-node">Sequencer node<a class="hash-link" href="#sequencer-node" title="Direct link to heading">‚Äã</a></h3><p>Some rollups utilize <em>sequencer nodes</em>. Sequencers are the main block producers for rollups, respoonsible for aggregating transactions into blocks, and typically executing transactions to produce a state root, securing the rollup&#x27;s light clients.</p><p>Rollkit plans to support multiple different pluggable sequencer schemes:</p><table><thead><tr><th></th><th>Deploy in one-click</th><th>Faster soft-confirmations than L1</th><th>Control over rollup&#x27;s transaction ordering</th><th>Atomic Composability with other Rollups</th><th>Censorship resistance</th><th>Implementation Status</th></tr></thead><tbody><tr><td>Centralized Sequencer</td><td>Requires spinning up a sequencer</td><td>Yes ‚úÖ</td><td>Yes ‚úÖ</td><td>No ‚ùå</td><td>Eventual ‚è≥</td><td>Implemented! ‚úÖ</td></tr><tr><td>Decentralized Sequencer</td><td>Requires spinning up a sequencer set</td><td>Yes ‚úÖ</td><td>Yes ‚úÖ</td><td>No ‚ùå</td><td>Real-time ‚ö°Ô∏è</td><td>Coming soon üü¢</td></tr><tr><td>Shared Decentralized Sequencer</td><td>Yes ‚úÖ</td><td>Yes ‚úÖ</td><td>No ‚ùå</td><td>Yes ‚úÖ</td><td>Real-time ‚ö°Ô∏è</td><td>Coming soon üü¢</td></tr><tr><td>Pure Fork-Choice Rule</td><td>Yes ‚úÖ</td><td>No ‚ùå</td><td>Maybe üü°</td><td>Maybe üü°</td><td>Eventual ‚è≥</td><td>Coming soon üü¢</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="full-node">Full node<a class="hash-link" href="#full-node" title="Direct link to heading">‚Äã</a></h3><p>Full nodes verify all blocks and can produce fraud proofs for optimistic rollups. Since they fully validate all rollup blocks, they don&#x27;t rely on fraud or validity proofs for security.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="light-node">Light node<a class="hash-link" href="#light-node" title="Direct link to heading">‚Äã</a></h3><p>Light nodes are light-weight rollup nodes that authenticate block headers, and are secured by fraud proofs or validity proofs. They&#x27;re recommended for average users on low-resource devices. Users running light nodes can make trust-minimized queries about the rollup&#x27;s state.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="block-manager">Block-Manager<a class="hash-link" href="#block-manager" title="Direct link to heading">‚Äã</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="rpc-layer">RPC Layer<a class="hash-link" href="#rpc-layer" title="Direct link to heading">‚Äã</a></h2><p>This layer is for exploring the rollup chain and submitting transactions.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/rollkit/docs/tree/main/docs/rollkit-stack.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/pr-preview/pr-79/docs/intro/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Introduction</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/pr-preview/pr-79/docs/category/tutorials/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Tutorials</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#rollup-application-dependencies" class="table-of-contents__link toc-highlight">Rollup Application Dependencies</a></li><li><a href="#mempool" class="table-of-contents__link toc-highlight">Mempool</a></li><li><a href="#state-fraud-proofs" class="table-of-contents__link toc-highlight">State Fraud Proofs</a></li><li><a href="#p2p-layer" class="table-of-contents__link toc-highlight">P2P-Layer</a></li><li><a href="#da-access" class="table-of-contents__link toc-highlight">DA-Access</a></li><li><a href="#rollkit-node-types" class="table-of-contents__link toc-highlight">Rollkit Node Types</a><ul><li><a href="#sequencer-node" class="table-of-contents__link toc-highlight">Sequencer node</a></li><li><a href="#full-node" class="table-of-contents__link toc-highlight">Full node</a></li><li><a href="#light-node" class="table-of-contents__link toc-highlight">Light node</a></li></ul></li><li><a href="#block-manager" class="table-of-contents__link toc-highlight">Block-Manager</a></li><li><a href="#rpc-layer" class="table-of-contents__link toc-highlight">RPC Layer</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2023 Rollkit</div></div></div></footer></div>
<script src="/pr-preview/pr-79/assets/js/runtime~main.e0b7e4af.js"></script>
<script src="/pr-preview/pr-79/assets/js/main.9b0ee162.js"></script>
</body>
</html>